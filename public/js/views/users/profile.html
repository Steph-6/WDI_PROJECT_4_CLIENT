<h1>{{ usersProfile.user.name }}'s Profile</h1>
<hr>

<!-- .................BANDS'S PROFILE...................... -->

<div ng-if="usersProfile.user.is_bar === 'no'">
  <div class="columns seven">
    <div class="left-column">
      <img class="spotify-image" src="{{ usersProfile.spotifyInfo.images[1].url}}" width="200px">
    </div>

    <label>Genre:</label>
    <ul>
      <li>{{ usersProfile.spotifyInfo.genres[0]}}</li>
      <li>{{ usersProfile.spotifyInfo.genres[1]}}</li>
    </ul>
    <hr>
    <div>
      <ul>
        <li>Pending Requests:  {{usersProfile.user.my_pending_requests.length }}</li>
        <li>Accepted Requests: {{usersProfile.user.my_accepted_requests.length }}</li>
        <li>Rejected Requests: {{usersProfile.user.my_rejected_requests.length }}</li>
      </ul>
    </div>
    <button class="delete" type="button" ng-click="usersProfile.delete({id: users.id})">Delete My Account</button>
  </div>


      <!-- <li>Upcoming Events: {{ usersProfile. events.number_of_pending_requests }}</li>
      <li ng-repeat="event in usersProfile.pending_requests">Upcoming Events: {{ event.pending_requests.event_id }}</li>
      <li>Past Events: {{ events.my_pending_requests.length }}</li> -->

  <div class="columns four right-side">
    <iframe id="spotifyWidget" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>
  </div>
</div>


<!-- ..................BAR'S PROFILE....................... -->

<div ng-if="usersProfile.user.is_bar === 'yes'">
  <button class="right" type="button" ui-sref="new({id: usersProfile.user.id})">Add a Time Slot</button>

  <h3>Upcoming Events</h3>
  <div ng-repeat="event in usersProfile.events | orderBy: '-date_string':true">
    <ul ng-if="event.is_expired === 'no'">
      <!-- {{ event.date }} -->
      <li>
        {{ event.date_string }} you have {{ event.accepted_requests.length }} artist's playing.
        <li>Description:     {{ event.description }}</li>
        <li>Slots Remaining: {{ event.slots_remaining }}</li>
      </li>
        <!-- **********Accepted Requests:  -->
      <li>
        Rejected Requests: {{ event.rejected_requests.length }}
      </li>
      <li>Pending Requests from:  </li>
      <ul ng-repeat="pending in event.pending_requests">
        <li>
          <div class="requests">
            <div ng-if="pending.status === 'pending'">
              By Artist: <a ui-sref="show({id: pending.user_id })">{{ pending.band_name }}</a>
              <button type="button" class="accept" ng-click="usersProfile.acceptRequest(pending)">Accept</button>
              <button type="button" class="reject" ng-click="usersProfile.rejectRequest(pending)">Reject</button>
            </div>
          </div>
        </li>
      </ul>
      <hr>
    </ul>
  </div>
  <!-- {{ event.number_of_pending_requests }} -->

  <div ng-repeat="event in usersProfile.user.events">
    <ul ng-if="event.is_expired === 'yes'">
      <h6>Past Events</h6>
      <li>Date:              {{ event.date }}</li>
      <li>Slots remaining:   {{ event.slots_remaining }}</li>
      <li>Pending Requests:  {{ event.pending_requests.length }}</li>
      <li>Accepted Requests: {{ event.accepted_requests.length }}</li>
      <li>Rejected Requests: {{ event.rejected_requests.length }}</li>
    </ul>
  </div>
  <button class="delete" type="button" ng-click="usersProfile.delete({id: users.id})">Delete My Account</button>
</div>



<!-- <button type="button" ui-sref="edit({id: usersProfile.user.id})">Edit My Account</button> -->
